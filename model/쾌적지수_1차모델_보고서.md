# 쾌적지수 1차 모델링

## EDA 기반 변수 선택
### EDA1
CO₂: 아침시간대 급증 → 환기필요

조도: 자연광 감소, 인공조명 영향 큼

온도/습도: 1924°C, 4060% 유지 중요

➔ 즉, CO₂, 조도, 온도, 습도 명확히 중요 ✅

### EDA2
온도(temperature):
➔ 불쾌지수와 직결.
➔ 보드 주변 온도 급상승, 입구 지역 저온 확인.

습도(humidity):
➔ 쾌적도와 직접 연관.
➔ "2" 지역 습도 급증.

CO₂ 농도(co2):
➔ 공기질/환기 상태 지표.
➔ 왼쪽 뒤, 입구 지역 CO₂ 상대적으로 높음.

조도(illumination):
➔ 공간 사용성(스마트팜 조도 매우 높음).

불쾌지수(discomfort index):
➔ 온도+습도 기반 종합 지표 (직접 측정한 것은 아니지만 계산 가능).

활동량(activity):
➔ 지역 "2"에서만 높은 활동 감지 (습도 상승과 연관).

### EDA3
온도-조도: 상관계수 0.96 → 거의 같이 움직임

습도-압력-CO₂: 환기 상태 종합 지표

불쾌지수와 온도: 임계점 23.5°C (24°C 넘어가면 불쾌지수 급상승)

➔ 온도, 습도, CO₂ 확실히 중요.
➔ 조도는 활동성 공간 최적화를 위해 필요.

### EDA4
CO₂와 활동량: 중간 강도의 양의 상관관계

TVOC: 활동량과 관련성 중간정도

압력: 환기 부족 지표로 활용 가능

➔ CO₂, TVOC 추천.
➔ 압력은 보조지표로 괜찮지만, 1차 모델에는 없어도 됨.

##  최종 뽑아야 할 Feature

temperature (온도)	불쾌지수와 직접적 관련, 공간별 차이 큼
humidity (습도)	불쾌지수 계산 필수, 습도 과다 공간 존재
co2 (이산화탄소)	환기 품질, 밀집도 영향 반영
illumination (조도)	공간 활용도/쾌적성과 연관
activity (활동량)	인원수 추정 보조 지표 가능 (특정 지역에서 활동량 급증 관찰)

| Feature | 출처 | 상태 |
| --- | --- | --- |
| co2 | EDA1, EDA2, EDA3, EDA4 | 필수 |
| humidity | EDA1, EDA2 | 필수 |
| temperature | EDA1, EDA2, EDA3 | 필수 |
| illumination | EDA1, EDA2 | 필수 |
| activity | EDA4 (EDA2에서도 감지됨) | 추가 |
| area | (외부 제공) | 추가 필요 |
| occupancy | (외부 제공) | 추가 필요 |
| discomfort_index | (계산용) | 파생 Feature |
---
### 추가 고려 사항
면적(area) 정보는 따로 수집해야 함.
(입구, 보드 주변, 스마트팜 등 면적 지정 필요)

인원수(occupancy) 데이터가 별도로 있으면
activity는 참고만 하고, occupancy로 주 학습하는게 더 정확해질 수 있다.

---
### 쾌적지수(Comfort Index) 계산
```
# 쾌적지수 계산
pivot_df['comfort_index'] = (
    0.4 * pivot_df['co2_norm'] +
    0.2 * pivot_df['humidity_norm'] +
    0.2 * pivot_df['temperature_norm'] +
    0.2 * pivot_df['illumination_norm']
```
)
- 가중합 방식을 이용해
80 이상: 쾌적

50~80: 보통

50 미만: 불쾌
위와 같이 라벨링 진행

> 단 쾌적지수 가중합(weight)을 임의로 정하는게 맞는가?
- 현재 정답이 없는 데이터 즉, 진짜 쾌적/불쾌 데이터가 없어서 센서 영향력 크기에 따라 대략 가중치를 배분

추후에 데이터 기반 최적 가중치 찾기 (머신러닝)

이 가중합 공식으로 1차 모델 만들어보고, 이후 실제 데이터 수집되면 가중치 튜닝까지 진행
```
학습 데이터 쌓이면

ML모델 (XGBoost, Random Forest, LightGBM 등)을 돌리면서

Feature Importance (변수 중요도) 자동으로 뽑아내는데,

이때 진짜 "가중치"를 자동으로 찾아내게 됨.
```

--- 
## TODO
활동량 데이터도 데이터에 추가

결측치 처리 

면적 데이터 추가 

인원수 데이터 추가

밀집도 계산

학습용 데이터셋 완성 

